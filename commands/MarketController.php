<?php

namespace app\commands;

use app\helpers\MarketHelper;
use app\models\MarketApi;
use app\telegram\crypto_signal\determine\OrderDetermine;
use Yii;
use yii\console\Controller;

class MarketController extends Controller
{


    public function actionOrder()
    {
        /**
         * @var MarketApi $marketApi
         */
        $marketApi = MarketApi::find()->andWhere(['user_id' => 1, 'market_id' => 1])->one();

        $text = <<<HTML
Ð¡Ð¾Ð²ÐµÑ€ÑˆÐ¸Ð» ÑÐ´ÐµÐ»ÐºÑƒ Ð¿Ð¾ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐµ Ð´Ð»Ð¸Ð½Ð½Ð¾Ð¹ Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ (LONG) Ð¿Ð¾ Ð¿Ð°Ñ€Ðµ       ATOM/USDT  
        
Ð¢ÐµÑ…Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹:        
        
ðŸŸ¢  ÐŸÐ¾ÐºÑƒÐ¿ÐºÐ°   ATOM/USDT      03.02.2025
        
ðŸ’° Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð²Ñ…Ð¾Ð´Ð°     $4,20000  -  $4,44000
        
ðŸŽ¯ Ð¦ÐµÐ»ÑŒ 1 -     $4,80000    
        
ðŸŽ¯ Ð¦ÐµÐ»ÑŒ 2 -     $5,40000    
        
        
â›”ï¸ Ð¡Ñ‚Ð¾Ð¿ Ð·Ð° ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ   -      
        
ÐÐºÑ‚Ð¸Ð² Ñƒ Ð¸ÑÑ‚Ð¾Ñ€Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼Ð°, Ð±ÐµÑ€ÐµÐ¼ Ð±ÐµÐ· ÑÑ‚Ð¾Ð¿Ð°        
        
        
Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ñ: ÐŸÐ¾ÑÐ»Ðµ Ð´Ð²Ð¸Ð¶ÐµÐ½Ð¸Ñ Ñ†ÐµÐ½Ñ‹ Ð¿Ð¾Ñ€ÑÐ´ÐºÐ° 2-3 % Ð² Ð½Ð°ÑˆÑƒ ÑÑ‚Ð¾Ñ€Ð¾Ð½Ñƒ Ð¾Ñ‚ Ñ‚Ð¾Ñ‡ÐºÐ¸ Ð²Ñ…Ð¾Ð´Ð°, Ð½Ðµ Ð´Ð¾Ð¶Ð¸Ð´Ð°Ñ‚ÑŒÑÑ Ñ‚ÐµÐ¹ÐºÐ¾Ð², ÑÑ€Ð°Ð·Ñƒ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ð¿ Ð² Ð‘Ð£, Ñ‚Ð°Ðº Ð¶Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ ÐµÐ³Ð¾ Ð¿Ð¾Ð´Ð¾Ð´Ð²Ð¸Ð³Ð°Ñ‚ÑŒ Ð² ÑÐ»ÐµÐ´ Ð·Ð° Ñ†ÐµÐ½Ð¾Ð¹ Ð´ÐµÑ€Ð¶Ð° ÐµÐ³Ð¾ Ð² Ñ€Ð°Ð¹Ð¾Ð½Ðµ 2-3% Ð¾Ñ‚ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¹ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸.        
        
ðŸ‘ðŸ¼- Ð²Ñ…Ð¾Ð¶Ñƒ Ð² ÑÐ´ÐµÐ»ÐºÑƒ        
ðŸ‘€- Ð½Ðµ ÑƒÑÐ¿ÐµÐ» Ð²Ð¾Ð¹Ñ‚Ð¸        
ðŸ¤·- Ð¿Ñ€Ð¾Ð¿ÑƒÑÐºÐ°ÑŽ        
ðŸ§‘â€ðŸ’»- Ð·Ð°Ð¹Ð´Ñƒ Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÑƒÑŽ        
Ð’ÑÐµ Ñ€ÐµÐ°ÐºÑ†Ð¸Ð¸ Ð² ÐºÐ°Ð½Ð°Ð»Ðµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ñ‹ Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ð¿Ð¾ ÑÑ‚Ð¾Ð¼Ñƒ Ð¿Ñ€Ð¸Ð½Ñ†Ð¸Ð¿Ñƒ.        
Ð’ÑÐµÐ¼ ÑƒÐ´Ð°Ñ‡Ð¸ Ð¸ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð³Ð¾ Ð¿Ñ€Ð¾Ñ„Ð¸Ñ‚Ð°. ðŸ¥°
HTML;

        $request = MarketHelper::textToMarketRequest($text);


//        $request = new OrderLongRequest();
//        $request->coin = 'XRPUSDT';
//        $request->sum = 5;


//        $marketApi->order($request);
    }
}